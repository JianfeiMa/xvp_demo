webpackJsonp([7,12],{152:function(t,n,o){var e,r;o(153),e=o(!function(){var t=new Error('Cannot find module "-!babel-loader!../../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./list.vue"');throw t.code="MODULE_NOT_FOUND",t}()),r=o(156),t.exports=e||{},t.exports.__esModule&&(t.exports=t.exports["default"]),r&&(("function"==typeof t.exports?t.exports.options:t.exports).template=r)},153:function(t,n,o){var e=o(154);"string"==typeof e&&(e=[[t.id,e,""]]);o(86)(e,{});e.locals&&(t.exports=e.locals)},154:function(t,n,o){n=t.exports=o(85)(),n.push([t.id,"\n    .wq-list button{\n        width:auto !important; display:inline-block !important;\n    }\n","",{version:3,sources:["/./src/views/order/list.vue.style"],names:[],mappings:";IAmIA;QACA,sBAAA,CAAA,gCAAA;KACA",file:"list.vue",sourcesContent:['<template>\n    <div class="wq-list">\n        <c-top-back></c-top-back>\n        <c-tab>\n            <c-tab-item @on-item-click=\'orderList\' selected>全部</c-tab-item>\n            <c-tab-item @on-item-click=\'orderList("DFK")\'>待付款</c-tab-item>\n            <c-tab-item @on-item-click=\'orderList("DFH")\'>待发货</c-tab-item>\n            <c-tab-item @on-item-click=\'orderList("DSH")\'>已发货</c-tab-item>\n            <c-tab-item @on-item-click=\'orderList("YSH")\'>已完成</c-tab-item>\n        </c-tab>\n        <c-order :order-data="orderData" type="primary" :order-status="odr"  @fukuan="fukuan"  @qrsh="qrsh" @goto=\'look\'  @look="look" @fahuo="fahuo"></c-order>\n        <c-scroll-load @on-load="load" :url=\'url\'><!-- 列表滚动加载--></c-scroll-load>\n        <c-confirm v-model="show" title="确认收货"\n                 @on-cancel="onCancel"\n                 @on-confirm="onConfirm">\n          <p style="text-align:center;">确认收货后，订单交易完成，钱款将立即到达商家账户</p>\n        </c-confirm>\n    </div>\n</template>\n<script>\n    import utils from \'../../libs/utils.js\';\n    import constants from \'../../libs/constants.js\';\n    export default {\n        data (){\n            return {\n                orderData: [],\n                //订单状态\n                odr: {\n                    dqr: constants.orderStatus.dqr,//待确认\n                    dfk: constants.orderStatus.dfk,//待付款\n                    dfh: constants.orderStatus.dfh,//待发货\n                    dsh: constants.orderStatus.dsh,//待收货\n                    ok: constants.orderStatus.ok,//完成交易\n                    close: constants.orderStatus.close//订单关闭（用户关闭/订单超时）\n                },\n                url: basepath + "/mall/order/order_list",\n                status:\'\',\n                order_id:-1,\n                show:false\n            }\n        },\n        mounted: function () {\n            this.$nextTick(function () {\n            //所有订单列表\n                this.orderList();\n                utils.MenuShare();\n           })\n        },\n        methods: {\n            load(data) {\n                if (data) {\n                    this.list = data;\n                }\n            },\n            look(id){\n                utils.go({path:\'detail\',query:{\'id\':id}},this.$router);\n            },\n            fahuo(id){\n                utils.go({path:\'logistics\',query:{\'id\':id}},this.$router,true);\n            },\n            fukuan(id){\n                utils.ajax({\n                    url: basepath + "/user/order/payurl", data: {order_id:id}, success: function (res) {\n                        if (res.code=="SUCESS") {\n                            location.href=res.result.url;\n                        }else{\n                            that.$vux.alert.show(res.message);\n                        }\n                    }\n                });\n            },\n            qrsh(id){\n                this.order_id=id;\n                this.show=true;\n            },\n            //订单列表\n            orderList(id){\n                let that = this;\n                that.status=id?id:\'\';\n                utils.ajax({\n                    url:"/user/order/query", type:\'post\', data: {order_status:id?id:\'\'}, success: function (data) {\n                        if (data.code=="SUCESS") {\n                            that.orderData = data.result;\n                        }else if(data.code==\'user_seller_error\'){\n                                that.$vux.alert.show({content:\'访问超时\',onHide :function(){\n                                  utils.go({path:\'/login/login\',query:{id:sessionStorage.getItem(\'product_id\')},that.$router);\n                                }});\n                        }else{\n                            that.orderData = [];\n                            that.$vux.alert.show(data.message);\n                        }\n                    }\n                });\n            },\n            onCancel(){\n                this.show=false;\n            },\n            onConfirm(){\n                let that = this;\n                utils.ajax({\n                    url: basepath + "/user/order/confirm",\n                    dataType: \'json\',\n                    type: \'POST\',\n                    data: {\n                        order_id: that.order_id,\n                    },\n                    success: function (data) {\n                        if (data.code=="SUCESS") {\n                            that.orderList(that.status);\n                            that.show=false;\n                        }else{\n                            that.$vux.alert.show(data.message);\n                        }\n                    }\n                });\n            }\n\n        },\n\n        components: {\n            "cTab": require(\'../../components/tab/tab.vue\'),\n            "cTabItem": require(\'../../components/tab/tab-item.vue\'),\n            "cOrder": require(\'../../components/x-order/x-order.vue\'),\n            "cTopBack": require(\'../../components/x-top-back/x-top-back.vue\'),\n            // 滚动加载\n            "cScrollLoad": require(\'../../components/x-scroll-load/x-scroll-load.vue\'),\n            "cConfirm": require(\'../../components/confirm/confirm.vue\'),\n        }\n    }\n</script>\n<style>\n    .wq-list button{\n        width:auto !important; display:inline-block !important;\n    }\n</style>\n'],sourceRoot:"webpack://"}])},156:function(t,n){t.exports='\n    <div class="wq-list">\n        <c-top-back></c-top-back>\n        <c-tab>\n            <c-tab-item @on-item-click=\'orderList\' selected>全部</c-tab-item>\n            <c-tab-item @on-item-click=\'orderList("DFK")\'>待付款</c-tab-item>\n            <c-tab-item @on-item-click=\'orderList("DFH")\'>待发货</c-tab-item>\n            <c-tab-item @on-item-click=\'orderList("DSH")\'>已发货</c-tab-item>\n            <c-tab-item @on-item-click=\'orderList("YSH")\'>已完成</c-tab-item>\n        </c-tab>\n        <c-order :order-data="orderData" type="primary" :order-status="odr"  @fukuan="fukuan"  @qrsh="qrsh" @goto=\'look\'  @look="look" @fahuo="fahuo"></c-order>\n        <c-scroll-load @on-load="load" :url=\'url\'><!-- 列表滚动加载--></c-scroll-load>\n        <c-confirm v-model="show" title="确认收货"\n                 @on-cancel="onCancel"\n                 @on-confirm="onConfirm">\n          <p style="text-align:center;">确认收货后，订单交易完成，钱款将立即到达商家账户</p>\n        </c-confirm>\n    </div>\n'}});