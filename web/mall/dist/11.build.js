webpackJsonp([11,12],{170:function(t,e,a){var n,o;a(171),n=a(!function(){var t=new Error('Cannot find module "-!babel-loader!../../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./mod.vue"');throw t.code="MODULE_NOT_FOUND",t}()),o=a(174),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports["default"]),o&&(("function"==typeof t.exports?t.exports.options:t.exports).template=o)},171:function(t,e,a){var n=a(172);"string"==typeof n&&(n=[[t.id,n,""]]);a(86)(n,{});n.locals&&(t.exports=n.locals)},172:function(t,e,a){e=t.exports=a(85)(),e.push([t.id,"\n    .addrmod .vux-popup-picker-value{\n        white-space: nowrap; width:210px; overflow: hidden; display: block;\n    }\n","",{version:3,sources:["/./src/views/addr/mod.vue.style"],names:[],mappings:";IAwJA;QACA,oBAAA,CAAA,YAAA,CAAA,iBAAA,CAAA,eAAA;KACA",file:"mod.vue",sourcesContent:['<template>\n<div class="addrmod">\n    <c-top-back></c-top-back>\n    <c-group>\n        <c-input title="收货人 " @on-change="validate" placeholder="请输入姓名" name="name" v-model="formData.name" required :max="20" ></c-input>\n        <c-input title="电话  " @on-change="validate" placeholder="请输入手机号" name="phone" required v-model="formData.phone" is-type="china-mobile" ></c-input>\n            <c-city title="选择地区" v-model="formData.addr_code" @getname="getname" @on-hide="logHide" placeholder="选择省市县" :list="addressData"></c-city>\n        <c-input title="详细地址" @on-change="validate" placeholder="请输入详细地址" required name="address" v-model="formData.address" :min="5" :max="100"></c-input>\n        <c-input title="邮编  " @on-change="validate" placeholder="请输入邮编" required name="post_code" v-model="formData.post_code" is-type="number" :min="6" :max="10"></c-input>\n    </c-group>\n    <div class="wrap-pd" style="margin-top:10px">\n        <c-button text="保存" :type="color" :disabled="disabled" @click.native="preserve" size="block"></c-button>\n    </div>\n    \n</div>\n\n</template>\n<script>\n    import utils from \'../../libs/utils.js\';\n    var ChinaAddressData = require("../../libs/components/data/china_address.json");\n    export default {\n        data (){\n            return {\n                formData:{               //填写的数据\n                    phone:\'\',             //手机号\n                    name:\'\',              //姓名                           \n                    post_code:\'\',             //邮编\n                    address:\'\',             //详细地址\n                    addr_code:[],             //省市区\n                    addr_text:[]\n                },\n                addressData:ChinaAddressData,\n                color:\'primary\',            //保存按钮颜色\n                name_status:true,          //收货人校检\n                phone_status:true,             //手机号校检\n                code_status:true,             //邮编校检\n                addr_status:true,             //详细地址校检\n                disabled:false,             //是否禁用保存按钮\n                addr_code_status:true             //省市区校检\n            }\n        },\n\n        methods:{\n            init(id){\n                let that = this;\n                utils.ajax({\n                    url: basepath + "/user/user/address/default",\n                    dataType: \'json\',\n                    type: \'POST\',\n                    data:{id:id},\n                    success: function(data){\n                        if(data.code=="SUCESS"){\n                            that.formData.name = data.result.name;\n                            that.formData.phone = data.result.phone;\n                            that.formData.post_code = data.result.post_code;\n                            that.formData.address = data.result.address;\n                            that.formData.addr_code = [data.result.province,data.result.city,data.result.county];\n                        }else if(data.code==\'user_seller_error\'){\n                                that.$vux.alert.show({content:\'访问超时\',onHide :function(){\n                                  utils.go({path:\'/login/login\',query:{id:sessionStorage.getItem(\'product_id\')},that.$router);\n                                }});\n                        }else{\n                            that.$vux.alert.show(data.message);\n                        }\n                    }\n                });\n            },\n            preserve(){\n                if(!this.disabled){\n                    let that = this;\n                    utils.ajax({\n                        url: basepath + "/user/user/address/set",\n                        dataType: \'json\',\n                        type: \'POST\',\n                        data:{\n                            \'id\':this.$route.query.id,\n                            \'name\':that.formData.name,\n                            \'phone\':that.formData.phone,\n                            \'post_code\':that.formData.post_code,\n                            \'address\':that.formData.address,\n                            \'province\':that.formData.addr_code[0],\n                            \'city\':that.formData.addr_code[1],\n                            \'county\':that.formData.addr_code[2],\n                            \'str\':that.formData.addr_text[0]+\' \'+that.formData.addr_text[1]+\' \'+that.formData.addr_text[2]+\' \'+that.formData.address\n                        },\n                        success: function(data){\n                            if(data.code=="SUCESS"){\n                                    utils.go({path:\'/order/add\'},that.$router,true);\n                            }else if(data.code==\'user_seller_error\'){\n                                that.$vux.alert.show({content:\'访问超时\',onHide :function(){\n                                  utils.go({path:\'/login/login\',query:{id:sessionStorage.getItem(\'product_id\')},that.$router);\n                                }});\n                            }else{\n                                that.$vux.alert.show(data.message);\n                            }\n                        },\n                        message:\'正在保存\'\n                    });\n                } \n            },\n            validate(obj){\n                if(obj.name==\'name\'){\n                    this.name_status = obj.valid;\n                }\n                if(obj.name==\'phone\'){\n                    this.phone_status = obj.valid;\n                }\n                if(obj.name==\'address\'){\n                    this.addr_status = obj.valid;\n                }\n                if(obj.name==\'post_code\'){\n                    this.code_status = obj.valid;\n                }\n                if(this.name_status && this.phone_status && this.addr_status && this.code_status && this.addr_code_status){\n                    this.color=\'primary\';\n                    this.disabled=false;\n                }else{\n                    this.color=\'default\';\n                    this.disabled=true;\n                }\n            },\n            logHide(success){\n                if(success){\n                    this.addr_code_status = true;\n                    if(this.name_status && this.phone_status && this.addr_status && this.code_status && this.addr_code_status){\n                        this.color=\'primary\';\n                        this.disabled=false;\n                    } \n                }\n                \n            },\n            getname(txt){\n                this.formData.addr_text=txt.split(\' \');\n            }\n            \n        },\n        mounted: function () {\n            this.$nextTick(function () {\n                this.init(this.$route.query.id);\n                utils.MenuShare();\n            })\n        },\n        components:{\n            "cGroup":require(\'../../components/group/group.vue\'),\n            "cTopBack":require(\'../../components/x-top-back/x-top-back.vue\'),\n            "cInput":require(\'../../components/input/input.vue\'),\n            "cButton":require(\'../../components/button/button.vue\'),\n            "cCity":require(\'../../components/address/address.vue\')\n        }\n    }\n</script>\n<style>\n    .addrmod .vux-popup-picker-value{\n        white-space: nowrap; width:210px; overflow: hidden; display: block;\n    }\n</style>\n'],sourceRoot:"webpack://"}])},174:function(t,e){t.exports='\n<div class="addrmod">\n    <c-top-back></c-top-back>\n    <c-group>\n        <c-input title="收货人 " @on-change="validate" placeholder="请输入姓名" name="name" v-model="formData.name" required :max="20" ></c-input>\n        <c-input title="电话  " @on-change="validate" placeholder="请输入手机号" name="phone" required v-model="formData.phone" is-type="china-mobile" ></c-input>\n            <c-city title="选择地区" v-model="formData.addr_code" @getname="getname" @on-hide="logHide" placeholder="选择省市县" :list="addressData"></c-city>\n        <c-input title="详细地址" @on-change="validate" placeholder="请输入详细地址" required name="address" v-model="formData.address" :min="5" :max="100"></c-input>\n        <c-input title="邮编  " @on-change="validate" placeholder="请输入邮编" required name="post_code" v-model="formData.post_code" is-type="number" :min="6" :max="10"></c-input>\n    </c-group>\n    <div class="wrap-pd" style="margin-top:10px">\n        <c-button text="保存" :type="color" :disabled="disabled" @click.native="preserve" size="block"></c-button>\n    </div>\n    \n</div>\n\n'}});