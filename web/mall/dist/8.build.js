webpackJsonp([8,12],{157:function(e,t,n){var o,r;n(158),o=n(!function(){var e=new Error('Cannot find module "-!babel-loader!../../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./detail.vue"');throw e.code="MODULE_NOT_FOUND",e}()),r=n(161),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options:e.exports).template=r)},158:function(e,t,n){var o=n(159);"string"==typeof o&&(o=[[e.id,o,""]]);n(86)(o,{});o.locals&&(e.exports=o.locals)},159:function(e,t,n){t=e.exports=n(85)(),t.push([e.id,"\n    .wq-detail{\n        margin-bottom:30px;\n    }   \n    .wq-detail .vux-step-item-main{\n        background-color:#fff !important;\n    }\n","",{version:3,sources:["/./src/views/order/detail.vue.style"],names:[],mappings:";IAqOA;QACA,mBAAA;KACA;IACA;QACA,iCAAA;KACA",file:"detail.vue",sourcesContent:['<template>\n    <div class="wq-detail">\n        <c-top-back></c-top-back>\n        <c-cell-wrap :title="orderStatus_text">\n            <c-step v-model="step" background-color=\'#f5f5f5\' gutter="10px" style="margin:0 10px">\n              <c-step-item title="买家付款"></c-step-item>\n              <c-step-item title="商家发货"></c-step-item>\n              <c-step-item title="完成交易"></c-step-item>\n            </c-step>\n            <div style="margin:10px 10px; margin-top:10px; border-top:1px solid #eee;">\n                <div style="margin-top:10px;">{{json.address_name}}</div>\n                <div style="font-size:12px;">{{json.address_phone}}</div>\n                <div style="font-size:12px; margin-top:10px; color:#999;">{{json.address}}</div>\n            </div>\n        </c-cell-wrap>\n        <c-panel-img v-if="json.orderdeliverys" :listname="json.orderdeliverys[0].logistics_company_name?json.orderdeliverys[0].logistics_company_name:\'商品列表\'" :moreinform="json.orderdeliverys[0].logistics_num?\'运单编号：\'+json.orderdeliverys[0].logistics_num:\'\'">\n            <c-panel-list v-for=\'item in json.goods\'\n                          :id=\'item.id\'\n                          :others=\'item.num\'\n                          :title=\'item.goodsName\'\n                          :details=\'item.sku?"规格："+item.sku:"规格：无"\'\n                          :from=\'item.price | formatPrice\'\n                          type="org"\n                          :imglink="item.goodsUrl+\'?imageMogr2/thumbnail/60x\'"\n                          :colororg=\'true\'\n                          :cheng="true">\n            </c-panel-list>\n        </c-panel-img>\n        <c-panel-img v-else listname="商品列表">\n            <c-panel-list v-for=\'item in json.goods\'\n                          :id=\'item.id\'\n                          :others=\'item.num\'\n                          :title=\'item.goodsName\'\n                          :details=\'item.sku?"规格："+item.sku:"规格：无"\'\n                          :from=\'item.price | formatPrice\'\n                          type="org"\n                          :imglink="item.goodsUrl+\'?imageMogr2/thumbnail/60x\'"\n                          :colororg=\'true\'\n                          :cheng="true">\n            </c-panel-list>\n        </c-panel-img>\n        <c-group>\n            <c-cell title="优惠" :value="json.seller_discount_fee | formatPriceCNY"></c-cell>\n            <c-cell title="运费" :value="json.logistic_fee | formatPriceCNY"></c-cell>\n            <c-cell title="实付金额" :value="json.pay | formatPriceCNY"></c-cell>\n        </c-group>\n        <c-cell-wrap style="padding:10px;">\n            订单编号：{{json.orderNum}}<br/>\n            创建时间：{{json.create_time}}<br/>\n            <div v-if="json.orderStatus==odr.close">订单超时：{{json.timeOut}}</div>\n            <div v-if="json.orderStatus==odr.dfh || json.orderStatus==odr.dsh || json.orderStatus==odr.ok">付款时间：{{json.pay_time}}</div>\n            <div v-if="json.orderStatus==odr.dsh || json.orderStatus==odr.ok">发货时间：{{json.orderdeliverys[0].create_time}}</div>\n            <div v-if="json.orderStatus==odr.ok">收货时间：{{json.confirm_receive_time}}</div>\n        </c-cell-wrap>\n        <div class="wrap-pd" style="margin-top:10px">\n            <c-flexbox>\n                <c-flexbox-item>\n                    <div class="flex-demo">\n                        <c-button v-if="json.orderStatus==\'DFK\'" type="primary" @click.native="updateOrder" size="block"\n                                  text="微信支付"></c-button>\n                        <c-button v-if="json.orderStatus==\'DSH\'" type="primary" @click.native="qrsh" size="block"\n                                  text="确认收货"></c-button>\n                    </div>\n                </c-flexbox-item>\n            </c-flexbox>\n        </div>\n\n        <c-confirm v-model="show" title="确认收货"\n                 @on-cancel="onCancel"\n                 @on-confirm="onConfirm">\n          <p style="text-align:center;">确认收货后，订单交易完成，钱款将立即到达商家账户</p>\n        </c-confirm>\n    </div>\n</template>\n<script>\n    import utils from \'../../libs/utils.js\';\n    import constants from \'../../libs/constants.js\';\n    export default {\n        data (){\n            return {\n                json: {//初始化数据\n                    take: {},\n                    ticket: {},\n                    discountInfo: {},\n                    subjoin: [],\n                },\n                orderStatus_text:\'订单状态：\',\n                //订单状态\n                odr: {\n                    dqr: constants.orderStatus.dqr,//待确认\n                    dfk: constants.orderStatus.dfk,//待付款\n                    dfh: constants.orderStatus.dfh,//待发货\n                    dsh: constants.orderStatus.dsh,//待收货\n                    ok: constants.orderStatus.ok,//完成交易\n                    close: constants.orderStatus.close//订单关闭（用户关闭/订单超时）\n                },\n                discount:"",//优惠金额\n                step:0,\n                orderStatus:\'\',\n                discount1:\'\',\n                show:false\n            }\n        },\n        computed: {},\n        mounted: function () {\n            this.$nextTick(function () {\n                this.into();\n                utils.MenuShare();\n            })\n        },\n        methods: {\n            //更新订单\n            updateOrder(){\n                let that = this;\n                utils.ajax({\n                    url: basepath + "/user/order/payurl", data: {order_id:that.$route.query.id}, success: function (res) {\n                        if (res.code=="SUCESS") {\n                            location.href=res.result.url;\n                        }else if(data.code==\'user_seller_error\'){\n                                that.$vux.alert.show({content:\'访问超时\',onHide :function(){\n                                  utils.go({path:\'/login/login\',query:{id:sessionStorage.getItem(\'product_id\')},that.$router);\n                                }});\n                        }else{\n                            that.$vux.alert.show(res.message);\n                        }\n                    }\n                });\n            },\n            qrsh(){\n                this.show=true;\n            },\n            into(){\n                let that = this;\n                utils.ajax({\n                    url: "/user/order/get",\n                    dataType: \'json\',\n                    type: \'POST\',\n                    data: {\n                        order_id: that.$route.query.id\n                    },\n                    success: function (data) {\n                        if (data.code=="SUCESS") {\n                            that.json=data.result;\n                            utils.loadingHide();\n                           // that.discount1=data.result.discountInfo;\n\n                            if(data.result.orderStatus==\'DFH\'){\n                                that.step=1;\n                            }\n                            if(data.result.orderStatus==\'DSH\'){\n                                that.step=2;\n                            }\n                            if(data.result.orderStatus==\'YSH\'){\n                                that.step=3;\n                            }\n\n\n                            if (data.result.orderStatus == \'DQR\') {\n                                that.orderStatus_text= "订单状态：订单待确认";\n                            } else if (data.result.orderStatus == \'DFK\') {\n                                that.orderStatus_text= "订单状态：等待买家付款";\n                            } else if (data.result.orderStatus == \'DFH\') {\n                                that.orderStatus_text= "订单状态：等待卖家发货";\n                            } else if (data.result.orderStatus == \'DSH\') {\n                                that.orderStatus_text= "订单状态：卖家已经发货";\n                            } else if (data.result.orderStatus == \'YSH\') {\n                                that.orderStatus_text= "订单状态：完成交易";\n                            } else if (data.result.orderStatus == \'YGB\') {\n                                that.orderStatus_text= "订单状态：订单关闭";\n                            }\n\n\n                        }else if(data.code==\'user_seller_error\'){\n                                that.$vux.alert.show({content:\'访问超时\',onHide :function(){\n                                  utils.go({path:\'/login/login\',query:{id:sessionStorage.getItem(\'product_id\')},that.$router);\n                                }});\n                        }else{\n                                that.$vux.alert.show(data.message);\n                        }\n                    }\n                });\n            },\n            onCancel(){\n                this.show=false;\n            },\n            onConfirm(){\n                let that = this;\n                utils.ajax({\n                    url: basepath + "/user/order/confirm",\n                    dataType: \'json\',\n                    type: \'POST\',\n                    data: {\n                        order_id: that.$route.query.id,\n                    },\n                    success: function (data) {\n                        if (data.code=="SUCESS") {\n                            that.into();\n                            that.show=false;\n                        }else if(data.code==\'user_seller_error\'){\n                                that.$vux.alert.show({content:\'访问超时\',onHide :function(){\n                                  utils.go({path:\'/login/login\',query:{id:sessionStorage.getItem(\'product_id\')},that.$router);\n                                }});\n                        }else{\n                            that.$vux.alert.show(data.message);\n                        }\n                    }\n                });\n            }\n        },\n        components: {\n            "cTopBack": require(\'../../components/x-top-back/x-top-back.vue\'),\n            "cStep": require(\'../../components/step/step.vue\'),\n            "cStepItem": require(\'../../components/step/step-item.vue\'),\n            "cGroup": require(\'../../components/group/group.vue\'),\n            "cPanelImg": require(\'../../components/x-panel-list/x-panel-img.vue\'),\n            "cPanelList": require(\'../../components/x-panel-list/x-panel-list.vue\'),\n            "cCellWrap": require(\'../../components/cell/cell-wrap.vue\'),\n            "cCell": require(\'../../components/cell/cell.vue\'),\n            "cPanel": require(\'../../components/panel/panel.vue\'),\n            "cButton": require(\'../../components/button/button.vue\'),\n            "cFlexbox": require(\'../../components/flexbox/flexbox.vue\'),\n            "cFlexboxItem": require(\'../../components/flexbox/flexbox-item.vue\'),\n            "cAddressInfo": require(\'../../components/x-address-info/x-address-info.vue\'),\n            "cInput": require(\'../../components/input/input.vue\'),\n            "cConfirm": require(\'../../components/confirm/confirm.vue\'),\n        }\n    }\n</script>\n<style>\n    .wq-detail{\n        margin-bottom:30px;\n    }   \n    .wq-detail .vux-step-item-main{\n        background-color:#fff !important;\n    }\n</style>\n\n'],sourceRoot:"webpack://"}])},161:function(e,t){e.exports='\n    <div class="wq-detail">\n        <c-top-back></c-top-back>\n        <c-cell-wrap :title="orderStatus_text">\n            <c-step v-model="step" background-color=\'#f5f5f5\' gutter="10px" style="margin:0 10px">\n              <c-step-item title="买家付款"></c-step-item>\n              <c-step-item title="商家发货"></c-step-item>\n              <c-step-item title="完成交易"></c-step-item>\n            </c-step>\n            <div style="margin:10px 10px; margin-top:10px; border-top:1px solid #eee;">\n                <div style="margin-top:10px;">{{json.address_name}}</div>\n                <div style="font-size:12px;">{{json.address_phone}}</div>\n                <div style="font-size:12px; margin-top:10px; color:#999;">{{json.address}}</div>\n            </div>\n        </c-cell-wrap>\n        <c-panel-img v-if="json.orderdeliverys" :listname="json.orderdeliverys[0].logistics_company_name?json.orderdeliverys[0].logistics_company_name:\'商品列表\'" :moreinform="json.orderdeliverys[0].logistics_num?\'运单编号：\'+json.orderdeliverys[0].logistics_num:\'\'">\n            <c-panel-list v-for=\'item in json.goods\'\n                          :id=\'item.id\'\n                          :others=\'item.num\'\n                          :title=\'item.goodsName\'\n                          :details=\'item.sku?"规格："+item.sku:"规格：无"\'\n                          :from=\'item.price | formatPrice\'\n                          type="org"\n                          :imglink="item.goodsUrl+\'?imageMogr2/thumbnail/60x\'"\n                          :colororg=\'true\'\n                          :cheng="true">\n            </c-panel-list>\n        </c-panel-img>\n        <c-panel-img v-else listname="商品列表">\n            <c-panel-list v-for=\'item in json.goods\'\n                          :id=\'item.id\'\n                          :others=\'item.num\'\n                          :title=\'item.goodsName\'\n                          :details=\'item.sku?"规格："+item.sku:"规格：无"\'\n                          :from=\'item.price | formatPrice\'\n                          type="org"\n                          :imglink="item.goodsUrl+\'?imageMogr2/thumbnail/60x\'"\n                          :colororg=\'true\'\n                          :cheng="true">\n            </c-panel-list>\n        </c-panel-img>\n        <c-group>\n            <c-cell title="优惠" :value="json.seller_discount_fee | formatPriceCNY"></c-cell>\n            <c-cell title="运费" :value="json.logistic_fee | formatPriceCNY"></c-cell>\n            <c-cell title="实付金额" :value="json.pay | formatPriceCNY"></c-cell>\n        </c-group>\n        <c-cell-wrap style="padding:10px;">\n            订单编号：{{json.orderNum}}<br/>\n            创建时间：{{json.create_time}}<br/>\n            <div v-if="json.orderStatus==odr.close">订单超时：{{json.timeOut}}</div>\n            <div v-if="json.orderStatus==odr.dfh || json.orderStatus==odr.dsh || json.orderStatus==odr.ok">付款时间：{{json.pay_time}}</div>\n            <div v-if="json.orderStatus==odr.dsh || json.orderStatus==odr.ok">发货时间：{{json.orderdeliverys[0].create_time}}</div>\n            <div v-if="json.orderStatus==odr.ok">收货时间：{{json.confirm_receive_time}}</div>\n        </c-cell-wrap>\n        <div class="wrap-pd" style="margin-top:10px">\n            <c-flexbox>\n                <c-flexbox-item>\n                    <div class="flex-demo">\n                        <c-button v-if="json.orderStatus==\'DFK\'" type="primary" @click.native="updateOrder" size="block"\n                                  text="微信支付"></c-button>\n                        <c-button v-if="json.orderStatus==\'DSH\'" type="primary" @click.native="qrsh" size="block"\n                                  text="确认收货"></c-button>\n                    </div>\n                </c-flexbox-item>\n            </c-flexbox>\n        </div>\n\n        <c-confirm v-model="show" title="确认收货"\n                 @on-cancel="onCancel"\n                 @on-confirm="onConfirm">\n          <p style="text-align:center;">确认收货后，订单交易完成，钱款将立即到达商家账户</p>\n        </c-confirm>\n    </div>\n'}});